/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectionStrategy, ChangeDetectorRef, Component } from '@angular/core';
import { NotifierNotification } from '../models/notifier-notification.model';
import { NotifierQueueService } from '../services/notifier-queue.service';
import { NotifierService } from '../services/notifier.service';
/**
 * Notifier container component
 * ----------------------------
 * This component acts as a wrapper for all notification components; consequently, it is responsible for creating a new notification
 * component and removing an existing notification component. Being more precicely, it also handles side effects of those actions, such as
 * shifting or even completely removing other notifications as well. Overall, this components handles actions coming from the queue service
 * by subscribing to its action stream.
 *
 * Technical sidenote:
 * This component has to be used somewhere in an application to work; it will not inject and create itself automatically, primarily in order
 * to not break the Angular AoT compilation. Moreover, this component (and also the notification components) set their change detection
 * strategy onPush, which means that we handle change detection manually in order to get the best performance. (#perfmatters)
 */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';
import * as ɵngcc2 from './notifier-notification.component';

function NotifierContainerComponent_li_1_Template(rf, ctx) { if (rf & 1) {
    var _r3 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "li", 1);
    ɵngcc0.ɵɵelementStart(1, "notifier-notification", 2);
    ɵngcc0.ɵɵlistener("ready", function NotifierContainerComponent_li_1_Template_notifier_notification_ready_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r3); var ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.onNotificationReady($event); })("dismiss", function NotifierContainerComponent_li_1_Template_notifier_notification_dismiss_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r3); var ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.onNotificationDismiss($event); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var notification_r1 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("notification", notification_r1);
} }
var NotifierContainerComponent = /** @class */ (function () {
    /**
     * Constructor
     *
     * @param changeDetector       Change detector, used for manually triggering change detection runs
     * @param notifierQueueService Notifier queue service
     * @param notifierService      Notifier service
     */
    function NotifierContainerComponent(changeDetector, notifierQueueService, notifierService) {
        var _this = this;
        this.changeDetector = changeDetector;
        this.queueService = notifierQueueService;
        this.config = notifierService.getConfig();
        this.notifications = [];
        // Connects this component up to the action queue, then handle incoming actions
        this.queueServiceSubscription = this.queueService.actionStream.subscribe((/**
         * @param {?} action
         * @return {?}
         */
        function (action) {
            _this.handleAction(action).then((/**
             * @return {?}
             */
            function () {
                _this.queueService.continue();
            }));
        }));
    }
    /**
     * Component destroyment lifecycle hook, cleans up the observable subsciption
     */
    /**
     * Component destroyment lifecycle hook, cleans up the observable subsciption
     * @return {?}
     */
    NotifierContainerComponent.prototype.ngOnDestroy = /**
     * Component destroyment lifecycle hook, cleans up the observable subsciption
     * @return {?}
     */
    function () {
        if (this.queueServiceSubscription) {
            this.queueServiceSubscription.unsubscribe();
        }
    };
    /**
     * Notification identifier, used as the ngFor trackby function
     *
     * @param   index        Index
     * @param   notification Notifier notification
     * @returns Notification ID as the unique identnfier
     */
    /**
     * Notification identifier, used as the ngFor trackby function
     *
     * @param {?} index        Index
     * @param {?} notification Notifier notification
     * @return {?} Notification ID as the unique identnfier
     */
    NotifierContainerComponent.prototype.identifyNotification = /**
     * Notification identifier, used as the ngFor trackby function
     *
     * @param {?} index        Index
     * @param {?} notification Notifier notification
     * @return {?} Notification ID as the unique identnfier
     */
    function (index, notification) {
        return notification.id;
    };
    /**
     * Event handler, handles clicks on notification dismiss buttons
     *
     * @param notificationId ID of the notification to dismiss
     */
    /**
     * Event handler, handles clicks on notification dismiss buttons
     *
     * @param {?} notificationId ID of the notification to dismiss
     * @return {?}
     */
    NotifierContainerComponent.prototype.onNotificationDismiss = /**
     * Event handler, handles clicks on notification dismiss buttons
     *
     * @param {?} notificationId ID of the notification to dismiss
     * @return {?}
     */
    function (notificationId) {
        this.queueService.push({
            payload: notificationId,
            type: 'HIDE'
        });
    };
    /**
     * Event handler, handles notification ready events
     *
     * @param notificationComponent Notification component reference
     */
    /**
     * Event handler, handles notification ready events
     *
     * @param {?} notificationComponent Notification component reference
     * @return {?}
     */
    NotifierContainerComponent.prototype.onNotificationReady = /**
     * Event handler, handles notification ready events
     *
     * @param {?} notificationComponent Notification component reference
     * @return {?}
     */
    function (notificationComponent) {
        /** @type {?} */
        var currentNotification = this.notifications[this.notifications.length - 1];
        currentNotification.component = notificationComponent; // Save the new omponent reference
        this.continueHandleShowAction(currentNotification); // Continue with handling the show action
    };
    /**
     * Handle incoming actions by mapping action types to methods, and then running them
     *
     * @param   action Action object
     * @returns Promise, resolved when done
     */
    /**
     * Handle incoming actions by mapping action types to methods, and then running them
     *
     * @private
     * @param {?} action Action object
     * @return {?} Promise, resolved when done
     */
    NotifierContainerComponent.prototype.handleAction = /**
     * Handle incoming actions by mapping action types to methods, and then running them
     *
     * @private
     * @param {?} action Action object
     * @return {?} Promise, resolved when done
     */
    function (action) {
        switch (action.type) { // TODO: Maybe a map (actionType -> class method) is a cleaner solution here?
            case 'SHOW':
                return this.handleShowAction(action);
            case 'HIDE':
                return this.handleHideAction(action);
            case 'HIDE_OLDEST':
                return this.handleHideOldestAction(action);
            case 'HIDE_NEWEST':
                return this.handleHideNewestAction(action);
            case 'HIDE_ALL':
                return this.handleHideAllAction(action);
            default:
                return new Promise((/**
                 * @param {?} resolve
                 * @param {?} reject
                 * @return {?}
                 */
                function (resolve, reject) {
                    resolve(); // Ignore unknown action types
                }));
        }
    };
    /**
     * Show a new notification
     *
     * We simply add the notification to the list, and then wait until its properly initialized / created / rendered.
     *
     * @param   action Action object
     * @returns Promise, resolved when done
     */
    /**
     * Show a new notification
     *
     * We simply add the notification to the list, and then wait until its properly initialized / created / rendered.
     *
     * @private
     * @param {?} action Action object
     * @return {?} Promise, resolved when done
     */
    NotifierContainerComponent.prototype.handleShowAction = /**
     * Show a new notification
     *
     * We simply add the notification to the list, and then wait until its properly initialized / created / rendered.
     *
     * @private
     * @param {?} action Action object
     * @return {?} Promise, resolved when done
     */
    function (action) {
        var _this = this;
        return new Promise((/**
         * @param {?} resolve
         * @param {?} reject
         * @return {?}
         */
        function (resolve, reject) {
            _this.tempPromiseResolver = resolve; // Save the promise resolve function so that it can be called later on by another method
            _this.addNotificationToList(new NotifierNotification(action.payload));
        }));
    };
    /**
     * Continue to show a new notification (after the notification components is initialized / created / rendered).
     *
     * If this is the first (and thus only) notification, we can simply show it. Otherwhise, if stacking is disabled (or a low value), we
     * switch out notifications, in particular we hide the existing one, and then show our new one. Yet, if stacking is enabled, we first
     * shift all older notifications, and then show our new notification. In addition, if there are too many notification on the screen,
     * we hide the oldest one first. Furthermore, if configured, animation overlapping is applied.
     *
     * @param notification New notification to show
     */
    /**
     * Continue to show a new notification (after the notification components is initialized / created / rendered).
     *
     * If this is the first (and thus only) notification, we can simply show it. Otherwhise, if stacking is disabled (or a low value), we
     * switch out notifications, in particular we hide the existing one, and then show our new one. Yet, if stacking is enabled, we first
     * shift all older notifications, and then show our new notification. In addition, if there are too many notification on the screen,
     * we hide the oldest one first. Furthermore, if configured, animation overlapping is applied.
     *
     * @private
     * @param {?} notification New notification to show
     * @return {?}
     */
    NotifierContainerComponent.prototype.continueHandleShowAction = /**
     * Continue to show a new notification (after the notification components is initialized / created / rendered).
     *
     * If this is the first (and thus only) notification, we can simply show it. Otherwhise, if stacking is disabled (or a low value), we
     * switch out notifications, in particular we hide the existing one, and then show our new one. Yet, if stacking is enabled, we first
     * shift all older notifications, and then show our new notification. In addition, if there are too many notification on the screen,
     * we hide the oldest one first. Furthermore, if configured, animation overlapping is applied.
     *
     * @private
     * @param {?} notification New notification to show
     * @return {?}
     */
    function (notification) {
        var _this = this;
        // First (which means only one) notification in the list?
        /** @type {?} */
        var numberOfNotifications = this.notifications.length;
        if (numberOfNotifications === 1) {
            notification.component.show().then(this.tempPromiseResolver); // Done
        }
        else {
            /** @type {?} */
            var implicitStackingLimit = 2;
            // Stacking enabled? (stacking value below 2 means stacking is disabled)
            if (this.config.behaviour.stacking === false || this.config.behaviour.stacking < implicitStackingLimit) {
                this.notifications[0].component.hide().then((/**
                 * @return {?}
                 */
                function () {
                    _this.removeNotificationFromList(_this.notifications[0]);
                    notification.component.show().then(_this.tempPromiseResolver); // Done
                }));
            }
            else {
                /** @type {?} */
                var stepPromises_1 = [];
                // Are there now too many notifications?
                if (numberOfNotifications > this.config.behaviour.stacking) {
                    /** @type {?} */
                    var oldNotifications_1 = this.notifications.slice(1, numberOfNotifications - 1);
                    // Are animations enabled?
                    if (this.config.animations.enabled) {
                        // Is animation overlap enabled?
                        if (this.config.animations.overlap !== false && this.config.animations.overlap > 0) {
                            stepPromises_1.push(this.notifications[0].component.hide());
                            setTimeout((/**
                             * @return {?}
                             */
                            function () {
                                stepPromises_1.push(_this.shiftNotifications(oldNotifications_1, notification.component.getHeight(), true));
                            }), this.config.animations.hide.speed - this.config.animations.overlap);
                            setTimeout((/**
                             * @return {?}
                             */
                            function () {
                                stepPromises_1.push(notification.component.show());
                            }), this.config.animations.hide.speed + this.config.animations.shift.speed - this.config.animations.overlap);
                        }
                        else {
                            stepPromises_1.push(new Promise((/**
                             * @param {?} resolve
                             * @param {?} reject
                             * @return {?}
                             */
                            function (resolve, reject) {
                                _this.notifications[0].component.hide().then((/**
                                 * @return {?}
                                 */
                                function () {
                                    _this.shiftNotifications(oldNotifications_1, notification.component.getHeight(), true).then((/**
                                     * @return {?}
                                     */
                                    function () {
                                        notification.component.show().then(resolve);
                                    }));
                                }));
                            })));
                        }
                    }
                    else {
                        stepPromises_1.push(this.notifications[0].component.hide());
                        stepPromises_1.push(this.shiftNotifications(oldNotifications_1, notification.component.getHeight(), true));
                        stepPromises_1.push(notification.component.show());
                    }
                }
                else {
                    /** @type {?} */
                    var oldNotifications_2 = this.notifications.slice(0, numberOfNotifications - 1);
                    // Are animations enabled?
                    if (this.config.animations.enabled) {
                        // Is animation overlap enabled?
                        if (this.config.animations.overlap !== false && this.config.animations.overlap > 0) {
                            stepPromises_1.push(this.shiftNotifications(oldNotifications_2, notification.component.getHeight(), true));
                            setTimeout((/**
                             * @return {?}
                             */
                            function () {
                                stepPromises_1.push(notification.component.show());
                            }), this.config.animations.shift.speed - this.config.animations.overlap);
                        }
                        else {
                            stepPromises_1.push(new Promise((/**
                             * @param {?} resolve
                             * @param {?} reject
                             * @return {?}
                             */
                            function (resolve, reject) {
                                _this.shiftNotifications(oldNotifications_2, notification.component.getHeight(), true).then((/**
                                 * @return {?}
                                 */
                                function () {
                                    notification.component.show().then(resolve);
                                }));
                            })));
                        }
                    }
                    else {
                        stepPromises_1.push(this.shiftNotifications(oldNotifications_2, notification.component.getHeight(), true));
                        stepPromises_1.push(notification.component.show());
                    }
                }
                Promise.all(stepPromises_1).then((/**
                 * @return {?}
                 */
                function () {
                    if (numberOfNotifications > _this.config.behaviour.stacking) {
                        _this.removeNotificationFromList(_this.notifications[0]);
                    }
                    _this.tempPromiseResolver();
                })); // Done
            }
        }
    };
    /**
     * Hide an existing notification
     *
     * Fist, we skip everything if there are no notifications at all, or the given notification does not exist. Then, we hide the given
     * notification. If there exist older notifications, we then shift them around to fill the gap. Once both hiding the given notification
     * and shifting the older notificaitons is done, the given notification gets finally removed (from the DOM).
     *
     * @param   action Action object, payload contains the notification ID
     * @returns Promise, resolved when done
     */
    /**
     * Hide an existing notification
     *
     * Fist, we skip everything if there are no notifications at all, or the given notification does not exist. Then, we hide the given
     * notification. If there exist older notifications, we then shift them around to fill the gap. Once both hiding the given notification
     * and shifting the older notificaitons is done, the given notification gets finally removed (from the DOM).
     *
     * @private
     * @param {?} action Action object, payload contains the notification ID
     * @return {?} Promise, resolved when done
     */
    NotifierContainerComponent.prototype.handleHideAction = /**
     * Hide an existing notification
     *
     * Fist, we skip everything if there are no notifications at all, or the given notification does not exist. Then, we hide the given
     * notification. If there exist older notifications, we then shift them around to fill the gap. Once both hiding the given notification
     * and shifting the older notificaitons is done, the given notification gets finally removed (from the DOM).
     *
     * @private
     * @param {?} action Action object, payload contains the notification ID
     * @return {?} Promise, resolved when done
     */
    function (action) {
        var _this = this;
        return new Promise((/**
         * @param {?} resolve
         * @param {?} reject
         * @return {?}
         */
        function (resolve, reject) {
            /** @type {?} */
            var stepPromises = [];
            // Does the notification exist / are there even any notifications? (let's prevent accidential errors)
            /** @type {?} */
            var notification = _this.findNotificationById(action.payload);
            if (notification === undefined) {
                resolve();
                return;
            }
            // Get older notifications
            /** @type {?} */
            var notificationIndex = _this.findNotificationIndexById(action.payload);
            if (notificationIndex === undefined) {
                resolve();
                return;
            }
            /** @type {?} */
            var oldNotifications = _this.notifications.slice(0, notificationIndex);
            // Do older notifications exist, and thus do we need to shift other notifications as a consequence?
            if (oldNotifications.length > 0) {
                // Are animations enabled?
                if (_this.config.animations.enabled && _this.config.animations.hide.speed > 0) {
                    // Is animation overlap enabled?
                    if (_this.config.animations.overlap !== false && _this.config.animations.overlap > 0) {
                        stepPromises.push(notification.component.hide());
                        setTimeout((/**
                         * @return {?}
                         */
                        function () {
                            stepPromises.push(_this.shiftNotifications(oldNotifications, notification.component.getHeight(), false));
                        }), _this.config.animations.hide.speed - _this.config.animations.overlap);
                    }
                    else {
                        notification.component.hide().then((/**
                         * @return {?}
                         */
                        function () {
                            stepPromises.push(_this.shiftNotifications(oldNotifications, notification.component.getHeight(), false));
                        }));
                    }
                }
                else {
                    stepPromises.push(notification.component.hide());
                    stepPromises.push(_this.shiftNotifications(oldNotifications, notification.component.getHeight(), false));
                }
            }
            else {
                stepPromises.push(notification.component.hide());
            }
            // Wait until both hiding and shifting is done, then remove the notification from the list
            Promise.all(stepPromises).then((/**
             * @return {?}
             */
            function () {
                _this.removeNotificationFromList(notification);
                resolve(); // Done
            }));
        }));
    };
    /**
     * Hide the oldest notification (bridge to handleHideAction)
     *
     * @param   action Action object
     * @returns Promise, resolved when done
     */
    /**
     * Hide the oldest notification (bridge to handleHideAction)
     *
     * @private
     * @param {?} action Action object
     * @return {?} Promise, resolved when done
     */
    NotifierContainerComponent.prototype.handleHideOldestAction = /**
     * Hide the oldest notification (bridge to handleHideAction)
     *
     * @private
     * @param {?} action Action object
     * @return {?} Promise, resolved when done
     */
    function (action) {
        // Are there any notifications? (prevent accidential errors)
        if (this.notifications.length === 0) {
            return new Promise((/**
             * @param {?} resolve
             * @param {?} reject
             * @return {?}
             */
            function (resolve, reject) {
                resolve();
            })); // Done
        }
        else {
            action.payload = this.notifications[0].id;
            return this.handleHideAction(action);
        }
    };
    /**
     * Hide the newest notification (bridge to handleHideAction)
     *
     * @param   action Action object
     * @returns Promise, resolved when done
     */
    /**
     * Hide the newest notification (bridge to handleHideAction)
     *
     * @private
     * @param {?} action Action object
     * @return {?} Promise, resolved when done
     */
    NotifierContainerComponent.prototype.handleHideNewestAction = /**
     * Hide the newest notification (bridge to handleHideAction)
     *
     * @private
     * @param {?} action Action object
     * @return {?} Promise, resolved when done
     */
    function (action) {
        // Are there any notifications? (prevent accidential errors)
        if (this.notifications.length === 0) {
            return new Promise((/**
             * @param {?} resolve
             * @param {?} reject
             * @return {?}
             */
            function (resolve, reject) {
                resolve();
            })); // Done
        }
        else {
            action.payload = this.notifications[this.notifications.length - 1].id;
            return this.handleHideAction(action);
        }
    };
    /**
     * Hide all notifications at once
     *
     * @param   action Action object
     * @returns Promise, resolved when done
     */
    /**
     * Hide all notifications at once
     *
     * @private
     * @param {?} action Action object
     * @return {?} Promise, resolved when done
     */
    NotifierContainerComponent.prototype.handleHideAllAction = /**
     * Hide all notifications at once
     *
     * @private
     * @param {?} action Action object
     * @return {?} Promise, resolved when done
     */
    function (action) {
        var _this = this;
        return new Promise((/**
         * @param {?} resolve
         * @param {?} reject
         * @return {?}
         */
        function (resolve, reject) {
            // Are there any notifications? (prevent accidential errors)
            /** @type {?} */
            var numberOfNotifications = _this.notifications.length;
            if (numberOfNotifications === 0) {
                resolve(); // Done
                return;
            }
            // Are animations enabled?
            if (_this.config.animations.enabled && _this.config.animations.hide.speed > 0 && _this.config.animations.hide.offset !== false &&
                _this.config.animations.hide.offset > 0) {
                var _loop_1 = function (i) {
                    /** @type {?} */
                    var animationOffset = _this.config.position.vertical.position === 'top' ? numberOfNotifications - 1 : i;
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        _this.notifications[i].component.hide().then((/**
                         * @return {?}
                         */
                        function () {
                            // Are we done here, was this the last notification to be hidden?
                            if ((_this.config.position.vertical.position === 'top' && i === 0) ||
                                (_this.config.position.vertical.position === 'bottom' && i === numberOfNotifications - 1)) {
                                _this.removeAllNotificationsFromList();
                                resolve(); // Done
                            }
                        }));
                    }), _this.config.animations.hide.offset * animationOffset);
                };
                for (var i = numberOfNotifications - 1; i >= 0; i--) {
                    _loop_1(i);
                }
            }
            else {
                /** @type {?} */
                var stepPromises = [];
                for (var i = numberOfNotifications - 1; i >= 0; i--) {
                    stepPromises.push(_this.notifications[i].component.hide());
                }
                Promise.all(stepPromises).then((/**
                 * @return {?}
                 */
                function () {
                    _this.removeAllNotificationsFromList();
                    resolve(); // Done
                }));
            }
        }));
    };
    /**
     * Shift multiple notifications at once
     *
     * @param   notifications List containing the notifications to be shifted
     * @param   distance      Distance to shift (in px)
     * @param   toMakePlace   Flag, defining in which direciton to shift
     * @returns Promise, resolved when done
     */
    /**
     * Shift multiple notifications at once
     *
     * @private
     * @param {?} notifications List containing the notifications to be shifted
     * @param {?} distance      Distance to shift (in px)
     * @param {?} toMakePlace   Flag, defining in which direciton to shift
     * @return {?} Promise, resolved when done
     */
    NotifierContainerComponent.prototype.shiftNotifications = /**
     * Shift multiple notifications at once
     *
     * @private
     * @param {?} notifications List containing the notifications to be shifted
     * @param {?} distance      Distance to shift (in px)
     * @param {?} toMakePlace   Flag, defining in which direciton to shift
     * @return {?} Promise, resolved when done
     */
    function (notifications, distance, toMakePlace) {
        return new Promise((/**
         * @param {?} resolve
         * @param {?} reject
         * @return {?}
         */
        function (resolve, reject) {
            // Are there any notifications to shift?
            if (notifications.length === 0) {
                resolve();
                return;
            }
            /** @type {?} */
            var notificationPromises = [];
            for (var i = notifications.length - 1; i >= 0; i--) {
                notificationPromises.push(notifications[i].component.shift(distance, toMakePlace));
            }
            Promise.all(notificationPromises).then(resolve); // Done
        }));
    };
    /**
     * Add a new notification to the list of notifications (triggers change detection)
     *
     * @param notification Notification to add to the list of notifications
     */
    /**
     * Add a new notification to the list of notifications (triggers change detection)
     *
     * @private
     * @param {?} notification Notification to add to the list of notifications
     * @return {?}
     */
    NotifierContainerComponent.prototype.addNotificationToList = /**
     * Add a new notification to the list of notifications (triggers change detection)
     *
     * @private
     * @param {?} notification Notification to add to the list of notifications
     * @return {?}
     */
    function (notification) {
        this.notifications.push(notification);
        this.changeDetector.markForCheck(); // Run change detection because the notification list changed
    };
    /**
     * Remove an existing notification from the list of notifications (triggers change detection)
     *
     * @param notification Notification to be removed from the list of notifications
     */
    /**
     * Remove an existing notification from the list of notifications (triggers change detection)
     *
     * @private
     * @param {?} notification Notification to be removed from the list of notifications
     * @return {?}
     */
    NotifierContainerComponent.prototype.removeNotificationFromList = /**
     * Remove an existing notification from the list of notifications (triggers change detection)
     *
     * @private
     * @param {?} notification Notification to be removed from the list of notifications
     * @return {?}
     */
    function (notification) {
        this.notifications =
            this.notifications.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item.component !== notification.component; }));
        this.changeDetector.markForCheck(); // Run change detection because the notification list changed
    };
    /**
     * Remove all notifications from the list (triggers change detection)
     */
    /**
     * Remove all notifications from the list (triggers change detection)
     * @private
     * @return {?}
     */
    NotifierContainerComponent.prototype.removeAllNotificationsFromList = /**
     * Remove all notifications from the list (triggers change detection)
     * @private
     * @return {?}
     */
    function () {
        this.notifications = [];
        this.changeDetector.markForCheck(); // Run change detection because the notification list changed
    };
    /**
     * Helper: Find a notification in the notification list by a given notification ID
     *
     * @param   notificationId Notification ID, used for finding notification
     * @returns Notification, undefined if not found
     */
    /**
     * Helper: Find a notification in the notification list by a given notification ID
     *
     * @private
     * @param {?} notificationId Notification ID, used for finding notification
     * @return {?} Notification, undefined if not found
     */
    NotifierContainerComponent.prototype.findNotificationById = /**
     * Helper: Find a notification in the notification list by a given notification ID
     *
     * @private
     * @param {?} notificationId Notification ID, used for finding notification
     * @return {?} Notification, undefined if not found
     */
    function (notificationId) {
        return this.notifications.find((/**
         * @param {?} currentNotification
         * @return {?}
         */
        function (currentNotification) { return currentNotification.id === notificationId; }));
    };
    /**
     * Helper: Find a notification's index by a given notification ID
     *
     * @param   notificationId Notification ID, used for finding a notification's index
     * @returns Notification index, undefined if not found
     */
    /**
     * Helper: Find a notification's index by a given notification ID
     *
     * @private
     * @param {?} notificationId Notification ID, used for finding a notification's index
     * @return {?} Notification index, undefined if not found
     */
    NotifierContainerComponent.prototype.findNotificationIndexById = /**
     * Helper: Find a notification's index by a given notification ID
     *
     * @private
     * @param {?} notificationId Notification ID, used for finding a notification's index
     * @return {?} Notification index, undefined if not found
     */
    function (notificationId) {
        /** @type {?} */
        var notificationIndex = this.notifications.findIndex((/**
         * @param {?} currentNotification
         * @return {?}
         */
        function (currentNotification) { return currentNotification.id === notificationId; }));
        return (notificationIndex !== -1 ? notificationIndex : undefined);
    };
    /** @nocollapse */
    NotifierContainerComponent.ctorParameters = function () { return [
        { type: ChangeDetectorRef },
        { type: NotifierQueueService },
        { type: NotifierService }
    ]; };
NotifierContainerComponent.ɵfac = function NotifierContainerComponent_Factory(t) { return new (t || NotifierContainerComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(NotifierQueueService), ɵngcc0.ɵɵdirectiveInject(NotifierService)); };
NotifierContainerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NotifierContainerComponent, selectors: [["notifier-container"]], hostAttrs: [1, "notifier__container"], decls: 2, vars: 2, consts: [["class", "notifier__container-list", 4, "ngFor", "ngForOf", "ngForTrackBy"], [1, "notifier__container-list"], [3, "notification", "ready", "dismiss"]], template: function NotifierContainerComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "ul");
        ɵngcc0.ɵɵtemplate(1, NotifierContainerComponent_li_1_Template, 2, 1, "li", 0);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.notifications)("ngForTrackBy", ctx.identifyNotification);
    } }, directives: [ɵngcc1.NgForOf, ɵngcc2.NotifierNotificationComponent], encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NotifierContainerComponent, [{
        type: Component,
        args: [{
                changeDetection: ChangeDetectionStrategy.OnPush,
                // (#perfmatters)
                host: {
                    class: 'notifier__container'
                },
                selector: 'notifier-container',
                template: "<ul>\n\t<li class=\"notifier__container-list\" *ngFor=\"let notification of notifications; trackBy: identifyNotification;\">\n\t\t<notifier-notification\n\t\t\t[notification]=\"notification\"\n\t\t\t(ready)=\"onNotificationReady( $event )\"\n\t\t\t(dismiss)=\"onNotificationDismiss( $event )\">\n\t\t</notifier-notification>\n\t</li>\n</ul>\n"
            }]
    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }, { type: NotifierQueueService }, { type: NotifierService }]; }, null); })();
    return NotifierContainerComponent;
}());
export { NotifierContainerComponent };
if (false) {
    /**
     * List of currently somewhat active notifications
     * @type {?}
     */
    NotifierContainerComponent.prototype.notifications;
    /**
     * Change detector
     * @type {?}
     * @private
     */
    NotifierContainerComponent.prototype.changeDetector;
    /**
     * Notifier queue service
     * @type {?}
     * @private
     */
    NotifierContainerComponent.prototype.queueService;
    /**
     * Notifier configuration
     * @type {?}
     * @private
     */
    NotifierContainerComponent.prototype.config;
    /**
     * Queue service observable subscription (saved for cleanup)
     * @type {?}
     * @private
     */
    NotifierContainerComponent.prototype.queueServiceSubscription;
    /**
     * Promise resolve function reference, temporarily used while the notification child component gets created
     * @type {?}
     * @private
     */
    NotifierContainerComponent.prototype.tempPromiseResolver;
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm90aWZpZXItY29udGFpbmVyLmNvbXBvbmVudC5qcyIsInNvdXJjZXMiOlsibmc6L2FuZ3VsYXItbm90aWZpZXIvbGliL2NvbXBvbmVudHMvbm90aWZpZXItY29udGFpbmVyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLHVCQUF1QixFQUFFLGlCQUFpQixFQUFFLFNBQVMsRUFBYSxNQUFNLGVBQWUsQ0FBQztBQU1qRyxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSx1Q0FBdUMsQ0FBQztBQUM3RSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUMxRSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDL0Q7QUFBSTtBQUFnQztBQUFnQztBQUtuQjtBQUNNO0FBQ0M7QUFBd0M7QUFBRztBQUF1QjtBQUlqRTtBQUNMO0FBQ1Y7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRTFDO0FBQ2dELElBdUMvQztBQUNEO0FBQ0c7QUFDRztBQUNHO0FBQ0c7QUFFRixPQUROO0FBQ0osSUFBQyxvQ0FBb0IsY0FBaUMsRUFBRSxvQkFBMEMsRUFBRSxlQUFnQztBQUFJLFFBQXZJLGlCQWFDO0FBQ0YsUUFiRSxJQUFJLENBQUMsY0FBYyxHQUFHLGNBQWMsQ0FBQztBQUN2QyxRQUFFLElBQUksQ0FBQyxZQUFZLEdBQUcsb0JBQW9CLENBQUM7QUFDM0MsUUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLGVBQWUsQ0FBQyxTQUFTLEVBQUUsQ0FBQztBQUM1QyxRQUFFLElBQUksQ0FBQyxhQUFhLEdBQUcsRUFBRSxDQUFDO0FBQzFCLFFBQ0UsK0VBQStFO0FBQ2pGLFFBQUUsSUFBSSxDQUFDLHdCQUF3QixHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLFNBQVM7QUFBTTtBQUMvRTtBQUF1QjtBQUFZLFFBRHdDLFVBQUUsTUFBc0I7QUFBSSxZQUNyRyxLQUFJLENBQUMsWUFBWSxDQUFF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LCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCwgT25EZXN0cm95IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBOb3RpZmllckFjdGlvbiB9IGZyb20gJy4uL21vZGVscy9ub3RpZmllci1hY3Rpb24ubW9kZWwnO1xuaW1wb3J0IHsgTm90aWZpZXJDb25maWcgfSBmcm9tICcuLi9tb2RlbHMvbm90aWZpZXItY29uZmlnLm1vZGVsJztcbmltcG9ydCB7IE5vdGlmaWVyTm90aWZpY2F0aW9uIH0gZnJvbSAnLi4vbW9kZWxzL25vdGlmaWVyLW5vdGlmaWNhdGlvbi5tb2RlbCc7XG5pbXBvcnQgeyBOb3RpZmllclF1ZXVlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL25vdGlmaWVyLXF1ZXVlLnNlcnZpY2UnO1xuaW1wb3J0IHsgTm90aWZpZXJTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvbm90aWZpZXIuc2VydmljZSc7XG5pbXBvcnQgeyBOb3RpZmllck5vdGlmaWNhdGlvbkNvbXBvbmVudCB9IGZyb20gJy4vbm90aWZpZXItbm90aWZpY2F0aW9uLmNvbXBvbmVudCc7XG5cbi8qKlxuICogTm90aWZpZXIgY29udGFpbmVyIGNvbXBvbmVudFxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogVGhpcyBjb21wb25lbnQgYWN0cyBhcyBhIHdyYXBwZXIgZm9yIGFsbCBub3RpZmljYXRpb24gY29tcG9uZW50czsgY29uc2VxdWVudGx5LCBpdCBpcyByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgYSBuZXcgbm90aWZpY2F0aW9uXG4gKiBjb21wb25lbnQgYW5kIHJlbW92aW5nIGFuIGV4aXN0aW5nIG5vdGlmaWNhdGlvbiBjb21wb25lbnQuIEJlaW5nIG1vcmUgcHJlY2ljZWx5LCBpdCBhbHNvIGhhbmRsZXMgc2lkZSBlZmZlY3RzIG9mIHRob3NlIGFjdGlvbnMsIHN1Y2ggYXNcbiAqIHNoaWZ0aW5nIG9yIGV2ZW4gY29tcGxldGVseSByZW1vdmluZyBvdGhlciBub3RpZmljYXRpb25zIGFzIHdlbGwuIE92ZXJhbGwsIHRoaXMgY29tcG9uZW50cyBoYW5kbGVzIGFjdGlvbnMgY29taW5nIGZyb20gdGhlIHF1ZXVlIHNlcnZpY2VcbiAqIGJ5IHN1YnNjcmliaW5nIHRvIGl0cyBhY3Rpb24gc3RyZWFtLlxuICpcbiAqIFRlY2huaWNhbCBzaWRlbm90ZTpcbiAqIFRoaXMgY29tcG9uZW50IGhhcyB0byBiZSB1c2VkIHNvbWV3aGVyZSBpbiBhbiBhcHBsaWNhdGlvbiB0byB3b3JrOyBpdCB3aWxsIG5vdCBpbmplY3QgYW5kIGNyZWF0ZSBpdHNlbGYgYXV0b21hdGljYWxseSwgcHJpbWFyaWx5IGluIG9yZGVyXG4gKiB0byBub3QgYnJlYWsgdGhlIEFuZ3VsYXIgQW9UIGNvbXBpbGF0aW9uLiBNb3Jlb3ZlciwgdGhpcyBjb21wb25lbnQgKGFuZCBhbHNvIHRoZSBub3RpZmljYXRpb24gY29tcG9uZW50cykgc2V0IHRoZWlyIGNoYW5nZSBkZXRlY3Rpb25cbiAqIHN0cmF0ZWd5IG9uUHVzaCwgd2hpY2ggbWVhbnMgdGhhdCB3ZSBoYW5kbGUgY2hhbmdlIGRldGVjdGlvbiBtYW51YWxseSBpbiBvcmRlciB0byBnZXQgdGhlIGJlc3QgcGVyZm9ybWFuY2UuICgjcGVyZm1hdHRlcnMpXG4gKi9cbkBDb21wb25lbnQoIHtcblx0Y2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsIC8vICgjcGVyZm1hdHRlcnMpXG5cdGhvc3Q6IHtcblx0XHRjbGFzczogJ25vdGlmaWVyX19jb250YWluZXInXG5cdH0sXG5cdHNlbGVjdG9yOiAnbm90aWZpZXItY29udGFpbmVyJyxcblx0dGVtcGxhdGVVcmw6ICcuL25vdGlmaWVyLWNvbnRhaW5lci5jb21wb25lbnQuaHRtbCdcbn0gKVxuZXhwb3J0IGNsYXNzIE5vdGlmaWVyQ29udGFpbmVyQ29tcG9uZW50IGltcGxlbWVudHMgT25EZXN0cm95IHtcblxuXHQvKipcblx0ICogTGlzdCBvZiBjdXJyZW50bHkgc29tZXdoYXQgYWN0aXZlIG5vdGlmaWNhdGlvbnNcblx0ICovXG5cdHB1YmxpYyBub3RpZmljYXRpb25zOiBBcnJheTxOb3RpZmllck5vdGlmaWNhdGlvbj47XG5cblx0LyoqXG5cdCAqIENoYW5nZSBkZXRlY3RvclxuXHQgKi9cblx0cHJpdmF0ZSByZWFkb25seSBjaGFuZ2VEZXRlY3RvcjogQ2hhbmdlRGV0ZWN0b3JSZWY7XG5cblx0LyoqXG5cdCAqIE5vdGlmaWVyIHF1ZXVlIHNlcnZpY2Vcblx0ICovXG5cdHByaXZhdGUgcmVhZG9ubHkgcXVldWVTZXJ2aWNlOiBOb3RpZmllclF1ZXVlU2VydmljZTtcblxuXHQvKipcblx0ICogTm90aWZpZXIgY29uZmlndXJhdGlvblxuXHQgKi9cblx0cHJpdmF0ZSByZWFkb25seSBjb25maWc6IE5vdGlmaWVyQ29uZmlnO1xuXG5cdC8qKlxuXHQgKiBRdWV1ZSBzZXJ2aWNlIG9ic2VydmFibGUgc3Vic2NyaXB0aW9uIChzYXZlZCBmb3IgY2xlYW51cClcblx0ICovXG5cdHByaXZhdGUgcXVldWVTZXJ2aWNlU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG5cblx0LyoqXG5cdCAqIFByb21pc2UgcmVzb2x2ZSBmdW5jdGlvbiByZWZlcmVuY2UsIHRlbXBvcmFyaWx5IHVzZWQgd2hpbGUgdGhlIG5vdGlmaWNhdGlvbiBjaGlsZCBjb21wb25lbnQgZ2V0cyBjcmVhdGVkXG5cdCAqL1xuXHRwcml2YXRlIHRlbXBQcm9taXNlUmVzb2x2ZXI6ICgpID0+IHZvaWQ7XG5cblx0LyoqXG5cdCAqIENvbnN0cnVjdG9yXG5cdCAqXG5cdCAqIEBwYXJhbSBjaGFuZ2VEZXRlY3RvciAgICAgICBDaGFuZ2UgZGV0ZWN0b3IsIHVzZWQgZm9yIG1hbnVhbGx5IHRyaWdnZXJpbmcgY2hhbmdlIGRldGVjdGlvbiBydW5zXG5cdCAqIEBwYXJhbSBub3RpZmllclF1ZXVlU2VydmljZSBOb3RpZmllciBxdWV1ZSBzZXJ2aWNlXG5cdCAqIEBwYXJhbSBub3RpZmllclNlcnZpY2UgICAgICBOb3RpZmllciBzZXJ2aWNlXG5cdCAqL1xuXHRwdWJsaWMgY29uc3RydWN0b3IoIGNoYW5nZURldGVjdG9yOiBDaGFuZ2VEZXRlY3RvclJlZiwgbm90aWZpZXJRdWV1ZVNlcnZpY2U6IE5vdGlmaWVyUXVldWVTZXJ2aWNlLCBub3RpZmllclNlcnZpY2U6IE5vdGlmaWVyU2VydmljZSApIHtcblx0XHR0aGlzLmNoYW5nZURldGVjdG9yID0gY2hhbmdlRGV0ZWN0b3I7XG5cdFx0dGhpcy5xdWV1ZVNlcnZpY2UgPSBub3RpZmllclF1ZXVlU2VydmljZTtcblx0XHR0aGlzLmNvbmZpZyA9IG5vdGlmaWVyU2VydmljZS5nZXRDb25maWcoKTtcblx0XHR0aGlzLm5vdGlmaWNhdGlvbnMgPSBbXTtcblxuXHRcdC8vIENvbm5lY3RzIHRoaXMgY29tcG9uZW50IHVwIHRvIHRoZSBhY3Rpb24gcXVldWUsIHRoZW4gaGFuZGxlIGluY29taW5nIGFjdGlvbnNcblx0XHR0aGlzLnF1ZXVlU2VydmljZVN1YnNjcmlwdGlvbiA9IHRoaXMucXVldWVTZXJ2aWNlLmFjdGlvblN0cmVhbS5zdWJzY3JpYmUoICggYWN0aW9uOiBOb3RpZmllckFjdGlvbiApID0+IHtcblx0XHRcdHRoaXMuaGFuZGxlQWN0aW9uKCBhY3Rpb24gKS50aGVuKCAoKSA9PiB7XG5cdFx0XHRcdHRoaXMucXVldWVTZXJ2aWNlLmNvbnRpbnVlKCk7XG5cdFx0XHR9ICk7XG5cdFx0fSApO1xuXG5cdH1cblxuXHQvKipcblx0ICogQ29tcG9uZW50IGRlc3Ryb3ltZW50IGxpZmVjeWNsZSBob29rLCBjbGVhbnMgdXAgdGhlIG9ic2VydmFibGUgc3Vic2NpcHRpb25cblx0ICovXG5cdHB1YmxpYyBuZ09uRGVzdHJveSgpOiB2b2lkIHtcblx0XHRpZiAoIHRoaXMucXVldWVTZXJ2aWNlU3Vic2NyaXB0aW9uICkge1xuXHRcdFx0dGhpcy5xdWV1ZVNlcnZpY2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogTm90aWZpY2F0aW9uIGlkZW50aWZpZXIsIHVzZWQgYXMgdGhlIG5nRm9yIHRyYWNrYnkgZnVuY3Rpb25cblx0ICpcblx0ICogQHBhcmFtICAgaW5kZXggICAgICAgIEluZGV4XG5cdCAqIEBwYXJhbSAgIG5vdGlmaWNhdGlvbiBOb3RpZmllciBub3RpZmljYXRpb25cblx0ICogQHJldHVybnMgTm90aWZpY2F0aW9uIElEIGFzIHRoZSB1bmlxdWUgaWRlbnRuZmllclxuXHQgKi9cblx0cHVibGljIGlkZW50aWZ5Tm90aWZpY2F0aW9uKCBpbmRleDogbnVtYmVyLCBub3RpZmljYXRpb246IE5vdGlmaWVyTm90aWZpY2F0aW9uICk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIG5vdGlmaWNhdGlvbi5pZDtcblx0fVxuXG5cdC8qKlxuXHQgKiBFdmVudCBoYW5kbGVyLCBoYW5kbGVzIGNsaWNrcyBvbiBub3RpZmljYXRpb24gZGlzbWlzcyBidXR0b25zXG5cdCAqXG5cdCAqIEBwYXJhbSBub3RpZmljYXRpb25JZCBJRCBvZiB0aGUgbm90aWZpY2F0aW9uIHRvIGRpc21pc3Ncblx0ICovXG5cdHB1YmxpYyBvbk5vdGlmaWNhdGlvbkRpc21pc3MoIG5vdGlmaWNhdGlvbklkOiBzdHJpbmcgKTogdm9pZCB7XG5cdFx0dGhpcy5xdWV1ZVNlcnZpY2UucHVzaCgge1xuXHRcdFx0cGF5bG9hZDogbm90aWZpY2F0aW9uSWQsXG5cdFx0XHR0eXBlOiAnSElERSdcblx0XHR9ICk7XG5cdH1cblxuXHQvKipcblx0ICogRXZlbnQgaGFuZGxlciwgaGFuZGxlcyBub3RpZmljYXRpb24gcmVhZHkgZXZlbnRzXG5cdCAqXG5cdCAqIEBwYXJhbSBub3RpZmljYXRpb25Db21wb25lbnQgTm90aWZpY2F0aW9uIGNvbXBvbmVudCByZWZlcmVuY2Vcblx0ICovXG5cdHB1YmxpYyBvbk5vdGlmaWNhdGlvblJlYWR5KCBub3RpZmljYXRpb25Db21wb25lbnQ6IE5vdGlmaWVyTm90aWZpY2F0aW9uQ29tcG9uZW50ICk6IHZvaWQge1xuXHRcdGxldCBjdXJyZW50Tm90aWZpY2F0aW9uOiBOb3RpZmllck5vdGlmaWNhdGlvbiA9IHRoaXMubm90aWZpY2F0aW9uc1sgdGhpcy5ub3RpZmljYXRpb25zLmxlbmd0aCAtIDEgXTsgLy8gR2V0IHRoZSBsYXRlc3Qgbm90aWZpY2F0aW9uXG5cdFx0Y3VycmVudE5vdGlmaWNhdGlvbi5jb21wb25lbnQgPSBub3RpZmljYXRpb25Db21wb25lbnQ7IC8vIFNhdmUgdGhlIG5ldyBvbXBvbmVudCByZWZlcmVuY2Vcblx0XHR0aGlzLmNvbnRpbnVlSGFuZGxlU2hvd0FjdGlvbiggY3VycmVudE5vdGlmaWNhdGlvbiApOyAvLyBDb250aW51ZSB3aXRoIGhhbmRsaW5nIHRoZSBzaG93IGFjdGlvblxuXHR9XG5cblx0LyoqXG5cdCAqIEhhbmRsZSBpbmNvbWluZyBhY3Rpb25zIGJ5IG1hcHBpbmcgYWN0aW9uIHR5cGVzIHRvIG1ldGhvZHMsIGFuZCB0aGVuIHJ1bm5pbmcgdGhlbVxuXHQgKlxuXHQgKiBAcGFyYW0gICBhY3Rpb24gQWN0aW9uIG9iamVjdFxuXHQgKiBAcmV0dXJucyBQcm9taXNlLCByZXNvbHZlZCB3aGVuIGRvbmVcblx0ICovXG5cdHByaXZhdGUgaGFuZGxlQWN0aW9uKCBhY3Rpb246IE5vdGlmaWVyQWN0aW9uICk6IFByb21pc2U8dW5kZWZpbmVkPiB7XG5cdFx0c3dpdGNoICggYWN0aW9uLnR5cGUgKSB7IC8vIFRPRE86IE1heWJlIGEgbWFwIChhY3Rpb25UeXBlIC0+IGNsYXNzIG1ldGhvZCkgaXMgYSBjbGVhbmVyIHNvbHV0aW9uIGhlcmU/XG5cdFx0XHRjYXNlICdTSE9XJzpcblx0XHRcdFx0cmV0dXJuIHRoaXMuaGFuZGxlU2hvd0FjdGlvbiggYWN0aW9uICk7XG5cdFx0XHRjYXNlICdISURFJzpcblx0XHRcdFx0cmV0dXJuIHRoaXMuaGFuZGxlSGlkZUFjdGlvbiggYWN0aW9uICk7XG5cdFx0XHRjYXNlICdISURFX09MREVTVCc6XG5cdFx0XHRcdHJldHVybiB0aGlzLmhhbmRsZUhpZGVPbGRlc3RBY3Rpb24oIGFjdGlvbiApO1xuXHRcdFx0Y2FzZSAnSElERV9ORVdFU1QnOlxuXHRcdFx0XHRyZXR1cm4gdGhpcy5oYW5kbGVIaWRlTmV3ZXN0QWN0aW9uKCBhY3Rpb24gKTtcblx0XHRcdGNhc2UgJ0hJREVfQUxMJzpcblx0XHRcdFx0cmV0dXJuIHRoaXMuaGFuZGxlSGlkZUFsbEFjdGlvbiggYWN0aW9uICk7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRyZXR1cm4gbmV3IFByb21pc2U8dW5kZWZpbmVkPiggKCByZXNvbHZlOiAoKSA9PiB2b2lkLCByZWplY3Q6ICgpID0+IHZvaWQgKSA9PiB7XG5cdFx0XHRcdFx0cmVzb2x2ZSgpOyAvLyBJZ25vcmUgdW5rbm93biBhY3Rpb24gdHlwZXNcblx0XHRcdFx0fSApO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBTaG93IGEgbmV3IG5vdGlmaWNhdGlvblxuXHQgKlxuXHQgKiBXZSBzaW1wbHkgYWRkIHRoZSBub3RpZmljYXRpb24gdG8gdGhlIGxpc3QsIGFuZCB0aGVuIHdhaXQgdW50aWwgaXRzIHByb3Blcmx5IGluaXRpYWxpemVkIC8gY3JlYXRlZCAvIHJlbmRlcmVkLlxuXHQgKlxuXHQgKiBAcGFyYW0gICBhY3Rpb24gQWN0aW9uIG9iamVjdFxuXHQgKiBAcmV0dXJucyBQcm9taXNlLCByZXNvbHZlZCB3aGVuIGRvbmVcblx0ICovXG5cdHByaXZhdGUgaGFuZGxlU2hvd0FjdGlvbiggYWN0aW9uOiBOb3RpZmllckFjdGlvbiApOiBQcm9taXNlPHVuZGVmaW5lZD4ge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZTx1bmRlZmluZWQ+KCAoIHJlc29sdmU6ICgpID0+IHZvaWQsIHJlamVjdDogKCkgPT4gdm9pZCApID0+IHtcblx0XHRcdHRoaXMudGVtcFByb21pc2VSZXNvbHZlciA9IHJlc29sdmU7IC8vIFNhdmUgdGhlIHByb21pc2UgcmVzb2x2ZSBmdW5jdGlvbiBzbyB0aGF0IGl0IGNhbiBiZSBjYWxsZWQgbGF0ZXIgb24gYnkgYW5vdGhlciBtZXRob2Rcblx0XHRcdHRoaXMuYWRkTm90aWZpY2F0aW9uVG9MaXN0KCBuZXcgTm90aWZpZXJOb3RpZmljYXRpb24oIGFjdGlvbi5wYXlsb2FkICkgKTtcblx0XHR9ICk7XG5cdH1cblxuXHQvKipcblx0ICogQ29udGludWUgdG8gc2hvdyBhIG5ldyBub3RpZmljYXRpb24gKGFmdGVyIHRoZSBub3RpZmljYXRpb24gY29tcG9uZW50cyBpcyBpbml0aWFsaXplZCAvIGNyZWF0ZWQgLyByZW5kZXJlZCkuXG5cdCAqXG5cdCAqIElmIHRoaXMgaXMgdGhlIGZpcnN0IChhbmQgdGh1cyBvbmx5KSBub3RpZmljYXRpb24sIHdlIGNhbiBzaW1wbHkgc2hvdyBpdC4gT3RoZXJ3aGlzZSwgaWYgc3RhY2tpbmcgaXMgZGlzYWJsZWQgKG9yIGEgbG93IHZhbHVlKSwgd2Vcblx0ICogc3dpdGNoIG91dCBub3RpZmljYXRpb25zLCBpbiBwYXJ0aWN1bGFyIHdlIGhpZGUgdGhlIGV4aXN0aW5nIG9uZSwgYW5kIHRoZW4gc2hvdyBvdXIgbmV3IG9uZS4gWWV0LCBpZiBzdGFja2luZyBpcyBlbmFibGVkLCB3ZSBmaXJzdFxuXHQgKiBzaGlmdCBhbGwgb2xkZXIgbm90aWZpY2F0aW9ucywgYW5kIHRoZW4gc2hvdyBvdXIgbmV3IG5vdGlmaWNhdGlvbi4gSW4gYWRkaXRpb24sIGlmIHRoZXJlIGFyZSB0b28gbWFueSBub3RpZmljYXRpb24gb24gdGhlIHNjcmVlbixcblx0ICogd2UgaGlkZSB0aGUgb2xkZXN0IG9uZSBmaXJzdC4gRnVydGhlcm1vcmUsIGlmIGNvbmZpZ3VyZWQsIGFuaW1hdGlvbiBvdmVybGFwcGluZyBpcyBhcHBsaWVkLlxuXHQgKlxuXHQgKiBAcGFyYW0gbm90aWZpY2F0aW9uIE5ldyBub3RpZmljYXRpb24gdG8gc2hvd1xuXHQgKi9cblx0cHJpdmF0ZSBjb250aW51ZUhhbmRsZVNob3dBY3Rpb24oIG5vdGlmaWNhdGlvbjogTm90aWZpZXJOb3RpZmljYXRpb24gKTogdm9pZCB7XG5cblx0XHQvLyBGaXJzdCAod2hpY2ggbWVhbnMgb25seSBvbmUpIG5vdGlmaWNhdGlvbiBpbiB0aGUgbGlzdD9cblx0XHRjb25zdCBudW1iZXJPZk5vdGlmaWNhdGlvbnM6IG51bWJlciA9IHRoaXMubm90aWZpY2F0aW9ucy5sZW5ndGg7XG5cdFx0aWYgKCBudW1iZXJPZk5vdGlmaWNhdGlvbnMgPT09IDEgKSB7XG5cdFx0XHRub3RpZmljYXRpb24uY29tcG9uZW50LnNob3coKS50aGVuKCB0aGlzLnRlbXBQcm9taXNlUmVzb2x2ZXIgKTsgLy8gRG9uZVxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdGNvbnN0IGltcGxpY2l0U3RhY2tpbmdMaW1pdDogbnVtYmVyID0gMjtcblxuXHRcdFx0Ly8gU3RhY2tpbmcgZW5hYmxlZD8gKHN0YWNraW5nIHZhbHVlIGJlbG93IDIgbWVhbnMgc3RhY2tpbmcgaXMgZGlzYWJsZWQpXG5cdFx0XHRpZiAoIHRoaXMuY29uZmlnLmJlaGF2aW91ci5zdGFja2luZyA9PT0gZmFsc2UgfHwgdGhpcy5jb25maWcuYmVoYXZpb3VyLnN0YWNraW5nIDwgaW1wbGljaXRTdGFja2luZ0xpbWl0ICkge1xuXHRcdFx0XHR0aGlzLm5vdGlmaWNhdGlvbnNbIDAgXS5jb21wb25lbnQuaGlkZSgpLnRoZW4oICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnJlbW92ZU5vdGlmaWNhdGlvbkZyb21MaXN0KCB0aGlzLm5vdGlmaWNhdGlvbnNbIDAgXSApO1xuXHRcdFx0XHRcdG5vdGlmaWNhdGlvbi5jb21wb25lbnQuc2hvdygpLnRoZW4oIHRoaXMudGVtcFByb21pc2VSZXNvbHZlciApOyAvLyBEb25lXG5cdFx0XHRcdH0gKTtcblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Y29uc3Qgc3RlcFByb21pc2VzOiBBcnJheTxQcm9taXNlPHVuZGVmaW5lZD4+ID0gW107XG5cblx0XHRcdFx0Ly8gQXJlIHRoZXJlIG5vdyB0b28gbWFueSBub3RpZmljYXRpb25zP1xuXHRcdFx0XHRpZiAoIG51bWJlck9mTm90aWZpY2F0aW9ucyA+IHRoaXMuY29uZmlnLmJlaGF2aW91ci5zdGFja2luZyApIHtcblxuXHRcdFx0XHRcdGNvbnN0IG9sZE5vdGlmaWNhdGlvbnM6IEFycmF5PE5vdGlmaWVyTm90aWZpY2F0aW9uPiA9IHRoaXMubm90aWZpY2F0aW9ucy5zbGljZSggMSwgbnVtYmVyT2ZOb3RpZmljYXRpb25zIC0gMSApO1xuXG5cdFx0XHRcdFx0Ly8gQXJlIGFuaW1hdGlvbnMgZW5hYmxlZD9cblx0XHRcdFx0XHRpZiAoIHRoaXMuY29uZmlnLmFuaW1hdGlvbnMuZW5hYmxlZCApIHtcblxuXHRcdFx0XHRcdFx0Ly8gSXMgYW5pbWF0aW9uIG92ZXJsYXAgZW5hYmxlZD9cblx0XHRcdFx0XHRcdGlmICggdGhpcy5jb25maWcuYW5pbWF0aW9ucy5vdmVybGFwICE9PSBmYWxzZSAmJiB0aGlzLmNvbmZpZy5hbmltYXRpb25zLm92ZXJsYXAgPiAwICkge1xuXHRcdFx0XHRcdFx0XHRzdGVwUHJvbWlzZXMucHVzaCggdGhpcy5ub3RpZmljYXRpb25zWyAwIF0uY29tcG9uZW50LmhpZGUoKSApO1xuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0c3RlcFByb21pc2VzLnB1c2goIHRoaXMuc2hpZnROb3RpZmljYXRpb25zKCBvbGROb3RpZmljYXRpb25zLCBub3RpZmljYXRpb24uY29tcG9uZW50LmdldEhlaWdodCgpLCB0cnVlICkgKTtcblx0XHRcdFx0XHRcdFx0fSwgdGhpcy5jb25maWcuYW5pbWF0aW9ucy5oaWRlLnNwZWVkIC0gdGhpcy5jb25maWcuYW5pbWF0aW9ucy5vdmVybGFwICk7XG5cdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRzdGVwUHJvbWlzZXMucHVzaCggbm90aWZpY2F0aW9uLmNvbXBvbmVudC5zaG93KCkgKTtcblx0XHRcdFx0XHRcdFx0fSwgdGhpcy5jb25maWcuYW5pbWF0aW9ucy5oaWRlLnNwZWVkICsgdGhpcy5jb25maWcuYW5pbWF0aW9ucy5zaGlmdC5zcGVlZCAtIHRoaXMuY29uZmlnLmFuaW1hdGlvbnMub3ZlcmxhcCApO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0c3RlcFByb21pc2VzLnB1c2goIG5ldyBQcm9taXNlPHVuZGVmaW5lZD4oICggcmVzb2x2ZTogKCkgPT4gdm9pZCwgcmVqZWN0OiAoKSA9PiB2b2lkICkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMubm90aWZpY2F0aW9uc1sgMCBdLmNvbXBvbmVudC5oaWRlKCkudGhlbiggKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5zaGlmdE5vdGlmaWNhdGlvbnMoIG9sZE5vdGlmaWNhdGlvbnMsIG5vdGlmaWNhdGlvbi5jb21wb25lbnQuZ2V0SGVpZ2h0KCksIHRydWUgKS50aGVuKCAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vdGlmaWNhdGlvbi5jb21wb25lbnQuc2hvdygpLnRoZW4oIHJlc29sdmUgKTtcblx0XHRcdFx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0XHRcdH0gKSApO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHN0ZXBQcm9taXNlcy5wdXNoKCB0aGlzLm5vdGlmaWNhdGlvbnNbIDAgXS5jb21wb25lbnQuaGlkZSgpICk7XG5cdFx0XHRcdFx0XHRzdGVwUHJvbWlzZXMucHVzaCggdGhpcy5zaGlmdE5vdGlmaWNhdGlvbnMoIG9sZE5vdGlmaWNhdGlvbnMsIG5vdGlmaWNhdGlvbi5jb21wb25lbnQuZ2V0SGVpZ2h0KCksIHRydWUgKSApO1xuXHRcdFx0XHRcdFx0c3RlcFByb21pc2VzLnB1c2goIG5vdGlmaWNhdGlvbi5jb21wb25lbnQuc2hvdygpICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRjb25zdCBvbGROb3RpZmljYXRpb25zOiBBcnJheTxOb3RpZmllck5vdGlmaWNhdGlvbj4gPSB0aGlzLm5vdGlmaWNhdGlvbnMuc2xpY2UoIDAsIG51bWJlck9mTm90aWZpY2F0aW9ucyAtIDEgKTtcblxuXHRcdFx0XHRcdC8vIEFyZSBhbmltYXRpb25zIGVuYWJsZWQ/XG5cdFx0XHRcdFx0aWYgKCB0aGlzLmNvbmZpZy5hbmltYXRpb25zLmVuYWJsZWQgKSB7XG5cblx0XHRcdFx0XHRcdC8vIElzIGFuaW1hdGlvbiBvdmVybGFwIGVuYWJsZWQ/XG5cdFx0XHRcdFx0XHRpZiAoIHRoaXMuY29uZmlnLmFuaW1hdGlvbnMub3ZlcmxhcCAhPT0gZmFsc2UgJiYgdGhpcy5jb25maWcuYW5pbWF0aW9ucy5vdmVybGFwID4gMCApIHtcblx0XHRcdFx0XHRcdFx0c3RlcFByb21pc2VzLnB1c2goIHRoaXMuc2hpZnROb3RpZmljYXRpb25zKCBvbGROb3RpZmljYXRpb25zLCBub3RpZmljYXRpb24uY29tcG9uZW50LmdldEhlaWdodCgpLCB0cnVlICkgKTtcblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCggKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHN0ZXBQcm9taXNlcy5wdXNoKCBub3RpZmljYXRpb24uY29tcG9uZW50LnNob3coKSApO1xuXHRcdFx0XHRcdFx0XHR9LCB0aGlzLmNvbmZpZy5hbmltYXRpb25zLnNoaWZ0LnNwZWVkIC0gdGhpcy5jb25maWcuYW5pbWF0aW9ucy5vdmVybGFwICk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRzdGVwUHJvbWlzZXMucHVzaCggbmV3IFByb21pc2U8dW5kZWZpbmVkPiggKCByZXNvbHZlOiAoKSA9PiB2b2lkLCByZWplY3Q6ICgpID0+IHZvaWQgKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5zaGlmdE5vdGlmaWNhdGlvbnMoIG9sZE5vdGlmaWNhdGlvbnMsIG5vdGlmaWNhdGlvbi5jb21wb25lbnQuZ2V0SGVpZ2h0KCksIHRydWUgKS50aGVuKCAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRub3RpZmljYXRpb24uY29tcG9uZW50LnNob3coKS50aGVuKCByZXNvbHZlICk7XG5cdFx0XHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0XHR9ICkgKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzdGVwUHJvbWlzZXMucHVzaCggdGhpcy5zaGlmdE5vdGlmaWNhdGlvbnMoIG9sZE5vdGlmaWNhdGlvbnMsIG5vdGlmaWNhdGlvbi5jb21wb25lbnQuZ2V0SGVpZ2h0KCksIHRydWUgKSApO1xuXHRcdFx0XHRcdFx0c3RlcFByb21pc2VzLnB1c2goIG5vdGlmaWNhdGlvbi5jb21wb25lbnQuc2hvdygpICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRQcm9taXNlLmFsbCggc3RlcFByb21pc2VzICkudGhlbiggKCkgPT4ge1xuXHRcdFx0XHRcdGlmICggbnVtYmVyT2ZOb3RpZmljYXRpb25zID4gdGhpcy5jb25maWcuYmVoYXZpb3VyLnN0YWNraW5nICkge1xuXHRcdFx0XHRcdFx0dGhpcy5yZW1vdmVOb3RpZmljYXRpb25Gcm9tTGlzdCggdGhpcy5ub3RpZmljYXRpb25zWyAwIF0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhpcy50ZW1wUHJvbWlzZVJlc29sdmVyKCk7XG5cdFx0XHRcdH0gKTsgLy8gRG9uZVxuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBIaWRlIGFuIGV4aXN0aW5nIG5vdGlmaWNhdGlvblxuXHQgKlxuXHQgKiBGaXN0LCB3ZSBza2lwIGV2ZXJ5dGhpbmcgaWYgdGhlcmUgYXJlIG5vIG5vdGlmaWNhdGlvbnMgYXQgYWxsLCBvciB0aGUgZ2l2ZW4gbm90aWZpY2F0aW9uIGRvZXMgbm90IGV4aXN0LiBUaGVuLCB3ZSBoaWRlIHRoZSBnaXZlblxuXHQgKiBub3RpZmljYXRpb24uIElmIHRoZXJlIGV4aXN0IG9sZGVyIG5vdGlmaWNhdGlvbnMsIHdlIHRoZW4gc2hpZnQgdGhlbSBhcm91bmQgdG8gZmlsbCB0aGUgZ2FwLiBPbmNlIGJvdGggaGlkaW5nIHRoZSBnaXZlbiBub3RpZmljYXRpb25cblx0ICogYW5kIHNoaWZ0aW5nIHRoZSBvbGRlciBub3RpZmljYWl0b25zIGlzIGRvbmUsIHRoZSBnaXZlbiBub3RpZmljYXRpb24gZ2V0cyBmaW5hbGx5IHJlbW92ZWQgKGZyb20gdGhlIERPTSkuXG5cdCAqXG5cdCAqIEBwYXJhbSAgIGFjdGlvbiBBY3Rpb24gb2JqZWN0LCBwYXlsb2FkIGNvbnRhaW5zIHRoZSBub3RpZmljYXRpb24gSURcblx0ICogQHJldHVybnMgUHJvbWlzZSwgcmVzb2x2ZWQgd2hlbiBkb25lXG5cdCAqL1xuXHRwcml2YXRlIGhhbmRsZUhpZGVBY3Rpb24oIGFjdGlvbjogTm90aWZpZXJBY3Rpb24gKTogUHJvbWlzZTx1bmRlZmluZWQ+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2U8dW5kZWZpbmVkPiggKCByZXNvbHZlOiAoKSA9PiB2b2lkLCByZWplY3Q6ICgpID0+IHZvaWQgKSA9PiB7XG5cblx0XHRcdGNvbnN0IHN0ZXBQcm9taXNlczogQXJyYXk8UHJvbWlzZTx1bmRlZmluZWQ+PiA9IFtdO1xuXG5cdFx0XHQvLyBEb2VzIHRoZSBub3RpZmljYXRpb24gZXhpc3QgLyBhcmUgdGhlcmUgZXZlbiBhbnkgbm90aWZpY2F0aW9ucz8gKGxldCdzIHByZXZlbnQgYWNjaWRlbnRpYWwgZXJyb3JzKVxuXHRcdFx0Y29uc3Qgbm90aWZpY2F0aW9uOiBOb3RpZmllck5vdGlmaWNhdGlvbiB8IHVuZGVmaW5lZCA9IHRoaXMuZmluZE5vdGlmaWNhdGlvbkJ5SWQoIGFjdGlvbi5wYXlsb2FkICk7XG5cdFx0XHRpZiAoIG5vdGlmaWNhdGlvbiA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXNvbHZlKCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gR2V0IG9sZGVyIG5vdGlmaWNhdGlvbnNcblx0XHRcdGNvbnN0IG5vdGlmaWNhdGlvbkluZGV4OiBudW1iZXIgfCB1bmRlZmluZWQgPSB0aGlzLmZpbmROb3RpZmljYXRpb25JbmRleEJ5SWQoIGFjdGlvbi5wYXlsb2FkICk7XG5cdFx0XHRpZiAoIG5vdGlmaWNhdGlvbkluZGV4ID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHJlc29sdmUoKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3Qgb2xkTm90aWZpY2F0aW9uczogQXJyYXk8Tm90aWZpZXJOb3RpZmljYXRpb24+ID0gdGhpcy5ub3RpZmljYXRpb25zLnNsaWNlKCAwLCBub3RpZmljYXRpb25JbmRleCApO1xuXG5cdFx0XHQvLyBEbyBvbGRlciBub3RpZmljYXRpb25zIGV4aXN0LCBhbmQgdGh1cyBkbyB3ZSBuZWVkIHRvIHNoaWZ0IG90aGVyIG5vdGlmaWNhdGlvbnMgYXMgYSBjb25zZXF1ZW5jZT9cblx0XHRcdGlmICggb2xkTm90aWZpY2F0aW9ucy5sZW5ndGggPiAwICkge1xuXG5cdFx0XHRcdC8vIEFyZSBhbmltYXRpb25zIGVuYWJsZWQ/XG5cdFx0XHRcdGlmICggdGhpcy5jb25maWcuYW5pbWF0aW9ucy5lbmFibGVkICYmIHRoaXMuY29uZmlnLmFuaW1hdGlvbnMuaGlkZS5zcGVlZCA+IDAgKSB7XG5cblx0XHRcdFx0XHQvLyBJcyBhbmltYXRpb24gb3ZlcmxhcCBlbmFibGVkP1xuXHRcdFx0XHRcdGlmICggdGhpcy5jb25maWcuYW5pbWF0aW9ucy5vdmVybGFwICE9PSBmYWxzZSAmJiB0aGlzLmNvbmZpZy5hbmltYXRpb25zLm92ZXJsYXAgPiAwICkge1xuXHRcdFx0XHRcdFx0c3RlcFByb21pc2VzLnB1c2goIG5vdGlmaWNhdGlvbi5jb21wb25lbnQuaGlkZSgpICk7XG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHN0ZXBQcm9taXNlcy5wdXNoKCB0aGlzLnNoaWZ0Tm90aWZpY2F0aW9ucyggb2xkTm90aWZpY2F0aW9ucywgbm90aWZpY2F0aW9uLmNvbXBvbmVudC5nZXRIZWlnaHQoKSwgZmFsc2UgKSApO1xuXHRcdFx0XHRcdFx0fSwgdGhpcy5jb25maWcuYW5pbWF0aW9ucy5oaWRlLnNwZWVkIC0gdGhpcy5jb25maWcuYW5pbWF0aW9ucy5vdmVybGFwICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdG5vdGlmaWNhdGlvbi5jb21wb25lbnQuaGlkZSgpLnRoZW4oICgpID0+IHtcblx0XHRcdFx0XHRcdFx0c3RlcFByb21pc2VzLnB1c2goIHRoaXMuc2hpZnROb3RpZmljYXRpb25zKCBvbGROb3RpZmljYXRpb25zLCBub3RpZmljYXRpb24uY29tcG9uZW50LmdldEhlaWdodCgpLCBmYWxzZSApICk7XG5cdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHN0ZXBQcm9taXNlcy5wdXNoKCBub3RpZmljYXRpb24uY29tcG9uZW50LmhpZGUoKSApO1xuXHRcdFx0XHRcdHN0ZXBQcm9taXNlcy5wdXNoKCB0aGlzLnNoaWZ0Tm90aWZpY2F0aW9ucyggb2xkTm90aWZpY2F0aW9ucywgbm90aWZpY2F0aW9uLmNvbXBvbmVudC5nZXRIZWlnaHQoKSwgZmFsc2UgKSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0c3RlcFByb21pc2VzLnB1c2goIG5vdGlmaWNhdGlvbi5jb21wb25lbnQuaGlkZSgpICk7XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gV2FpdCB1bnRpbCBib3RoIGhpZGluZyBhbmQgc2hpZnRpbmcgaXMgZG9uZSwgdGhlbiByZW1vdmUgdGhlIG5vdGlmaWNhdGlvbiBmcm9tIHRoZSBsaXN0XG5cdFx0XHRQcm9taXNlLmFsbCggc3RlcFByb21pc2VzICkudGhlbiggKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnJlbW92ZU5vdGlmaWNhdGlvbkZyb21MaXN0KCBub3RpZmljYXRpb24gKTtcblx0XHRcdFx0cmVzb2x2ZSgpOyAvLyBEb25lXG5cdFx0XHR9ICk7XG5cblx0XHR9ICk7XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBIaWRlIHRoZSBvbGRlc3Qgbm90aWZpY2F0aW9uIChicmlkZ2UgdG8gaGFuZGxlSGlkZUFjdGlvbilcblx0ICpcblx0ICogQHBhcmFtICAgYWN0aW9uIEFjdGlvbiBvYmplY3Rcblx0ICogQHJldHVybnMgUHJvbWlzZSwgcmVzb2x2ZWQgd2hlbiBkb25lXG5cdCAqL1xuXHRwcml2YXRlIGhhbmRsZUhpZGVPbGRlc3RBY3Rpb24oIGFjdGlvbjogTm90aWZpZXJBY3Rpb24gKTogUHJvbWlzZTx1bmRlZmluZWQ+IHtcblxuXHRcdC8vIEFyZSB0aGVyZSBhbnkgbm90aWZpY2F0aW9ucz8gKHByZXZlbnQgYWNjaWRlbnRpYWwgZXJyb3JzKVxuXHRcdGlmICggdGhpcy5ub3RpZmljYXRpb25zLmxlbmd0aCA9PT0gMCApIHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZTx1bmRlZmluZWQ+KCAoIHJlc29sdmU6ICgpID0+IHZvaWQsIHJlamVjdDogKCkgPT4gdm9pZCApID0+IHtcblx0XHRcdFx0cmVzb2x2ZSgpO1xuXHRcdFx0fSApOyAvLyBEb25lXG5cdFx0fSBlbHNlIHtcblx0XHRcdGFjdGlvbi5wYXlsb2FkID0gdGhpcy5ub3RpZmljYXRpb25zWyAwIF0uaWQ7XG5cdFx0XHRyZXR1cm4gdGhpcy5oYW5kbGVIaWRlQWN0aW9uKCBhY3Rpb24gKTtcblx0XHR9XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBIaWRlIHRoZSBuZXdlc3Qgbm90aWZpY2F0aW9uIChicmlkZ2UgdG8gaGFuZGxlSGlkZUFjdGlvbilcblx0ICpcblx0ICogQHBhcmFtICAgYWN0aW9uIEFjdGlvbiBvYmplY3Rcblx0ICogQHJldHVybnMgUHJvbWlzZSwgcmVzb2x2ZWQgd2hlbiBkb25lXG5cdCAqL1xuXHRwcml2YXRlIGhhbmRsZUhpZGVOZXdlc3RBY3Rpb24oIGFjdGlvbjogTm90aWZpZXJBY3Rpb24gKTogUHJvbWlzZTx1bmRlZmluZWQ+IHtcblxuXHRcdC8vIEFyZSB0aGVyZSBhbnkgbm90aWZpY2F0aW9ucz8gKHByZXZlbnQgYWNjaWRlbnRpYWwgZXJyb3JzKVxuXHRcdGlmICggdGhpcy5ub3RpZmljYXRpb25zLmxlbmd0aCA9PT0gMCApIHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZTx1bmRlZmluZWQ+KCAoIHJlc29sdmU6ICgpID0+IHZvaWQsIHJlamVjdDogKCkgPT4gdm9pZCApID0+IHtcblx0XHRcdFx0cmVzb2x2ZSgpO1xuXHRcdFx0fSApOyAvLyBEb25lXG5cdFx0fSBlbHNlIHtcblx0XHRcdGFjdGlvbi5wYXlsb2FkID0gdGhpcy5ub3RpZmljYXRpb25zWyB0aGlzLm5vdGlmaWNhdGlvbnMubGVuZ3RoIC0gMSBdLmlkO1xuXHRcdFx0cmV0dXJuIHRoaXMuaGFuZGxlSGlkZUFjdGlvbiggYWN0aW9uICk7XG5cdFx0fVxuXG5cdH1cblxuXHQvKipcblx0ICogSGlkZSBhbGwgbm90aWZpY2F0aW9ucyBhdCBvbmNlXG5cdCAqXG5cdCAqIEBwYXJhbSAgIGFjdGlvbiBBY3Rpb24gb2JqZWN0XG5cdCAqIEByZXR1cm5zIFByb21pc2UsIHJlc29sdmVkIHdoZW4gZG9uZVxuXHQgKi9cblx0cHJpdmF0ZSBoYW5kbGVIaWRlQWxsQWN0aW9uKCBhY3Rpb246IE5vdGlmaWVyQWN0aW9uICk6IFByb21pc2U8dW5kZWZpbmVkPiB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlPHVuZGVmaW5lZD4oICggcmVzb2x2ZTogKCkgPT4gdm9pZCwgcmVqZWN0OiAoKSA9PiB2b2lkICkgPT4ge1xuXG5cdFx0XHQvLyBBcmUgdGhlcmUgYW55IG5vdGlmaWNhdGlvbnM/IChwcmV2ZW50IGFjY2lkZW50aWFsIGVycm9ycylcblx0XHRcdGNvbnN0IG51bWJlck9mTm90aWZpY2F0aW9uczogbnVtYmVyID0gdGhpcy5ub3RpZmljYXRpb25zLmxlbmd0aDtcblx0XHRcdGlmICggbnVtYmVyT2ZOb3RpZmljYXRpb25zID09PSAwICkge1xuXHRcdFx0XHRyZXNvbHZlKCk7IC8vIERvbmVcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBcmUgYW5pbWF0aW9ucyBlbmFibGVkP1xuXHRcdFx0aWYgKCB0aGlzLmNvbmZpZy5hbmltYXRpb25zLmVuYWJsZWQgJiYgdGhpcy5jb25maWcuYW5pbWF0aW9ucy5oaWRlLnNwZWVkID4gMCAmJiB0aGlzLmNvbmZpZy5hbmltYXRpb25zLmhpZGUub2Zmc2V0ICE9PSBmYWxzZSAmJlxuXHRcdFx0XHR0aGlzLmNvbmZpZy5hbmltYXRpb25zLmhpZGUub2Zmc2V0ID4gMCApIHtcblxuXHRcdFx0XHRmb3IgKCBsZXQgaTogbnVtYmVyID0gbnVtYmVyT2ZOb3RpZmljYXRpb25zIC0gMTsgaSA+PSAwOyBpLS0gKSB7XG5cdFx0XHRcdFx0Y29uc3QgYW5pbWF0aW9uT2Zmc2V0OiBudW1iZXIgPSB0aGlzLmNvbmZpZy5wb3NpdGlvbi52ZXJ0aWNhbC5wb3NpdGlvbiA9PT0gJ3RvcCcgPyBudW1iZXJPZk5vdGlmaWNhdGlvbnMgLSAxIDogaTtcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCAoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLm5vdGlmaWNhdGlvbnNbIGkgXS5jb21wb25lbnQuaGlkZSgpLnRoZW4oICgpID0+IHtcblxuXHRcdFx0XHRcdFx0XHQvLyBBcmUgd2UgZG9uZSBoZXJlLCB3YXMgdGhpcyB0aGUgbGFzdCBub3RpZmljYXRpb24gdG8gYmUgaGlkZGVuP1xuXHRcdFx0XHRcdFx0XHRpZiAoICggdGhpcy5jb25maWcucG9zaXRpb24udmVydGljYWwucG9zaXRpb24gPT09ICd0b3AnICYmIGkgPT09IDAgKSB8fFxuXHRcdFx0XHRcdFx0XHRcdCggdGhpcy5jb25maWcucG9zaXRpb24udmVydGljYWwucG9zaXRpb24gPT09ICdib3R0b20nICYmIGkgPT09IG51bWJlck9mTm90aWZpY2F0aW9ucyAtIDEgKSApIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbW92ZUFsbE5vdGlmaWNhdGlvbnNGcm9tTGlzdCgpO1xuXHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoKTsgLy8gRG9uZVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHR9LCB0aGlzLmNvbmZpZy5hbmltYXRpb25zLmhpZGUub2Zmc2V0ICogYW5pbWF0aW9uT2Zmc2V0ICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRsZXQgc3RlcFByb21pc2VzOiBBcnJheTxQcm9taXNlPHVuZGVmaW5lZD4+ID0gW107XG5cdFx0XHRcdGZvciAoIGxldCBpOiBudW1iZXIgPSBudW1iZXJPZk5vdGlmaWNhdGlvbnMgLSAxOyBpID49IDA7IGktLSApIHtcblx0XHRcdFx0XHRzdGVwUHJvbWlzZXMucHVzaCggdGhpcy5ub3RpZmljYXRpb25zWyBpIF0uY29tcG9uZW50LmhpZGUoKSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFByb21pc2UuYWxsKCBzdGVwUHJvbWlzZXMgKS50aGVuKCAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5yZW1vdmVBbGxOb3RpZmljYXRpb25zRnJvbUxpc3QoKTtcblx0XHRcdFx0XHRyZXNvbHZlKCk7IC8vIERvbmVcblx0XHRcdFx0fSApO1xuXG5cdFx0XHR9XG5cblx0XHR9ICk7XG5cdH1cblxuXHQvKipcblx0ICogU2hpZnQgbXVsdGlwbGUgbm90aWZpY2F0aW9ucyBhdCBvbmNlXG5cdCAqXG5cdCAqIEBwYXJhbSAgIG5vdGlmaWNhdGlvbnMgTGlzdCBjb250YWluaW5nIHRoZSBub3RpZmljYXRpb25zIHRvIGJlIHNoaWZ0ZWRcblx0ICogQHBhcmFtICAgZGlzdGFuY2UgICAgICBEaXN0YW5jZSB0byBzaGlmdCAoaW4gcHgpXG5cdCAqIEBwYXJhbSAgIHRvTWFrZVBsYWNlICAgRmxhZywgZGVmaW5pbmcgaW4gd2hpY2ggZGlyZWNpdG9uIHRvIHNoaWZ0XG5cdCAqIEByZXR1cm5zIFByb21pc2UsIHJlc29sdmVkIHdoZW4gZG9uZVxuXHQgKi9cblx0cHJpdmF0ZSBzaGlmdE5vdGlmaWNhdGlvbnMoIG5vdGlmaWNhdGlvbnM6IEFycmF5PE5vdGlmaWVyTm90aWZpY2F0aW9uPiwgZGlzdGFuY2U6IG51bWJlciwgdG9NYWtlUGxhY2U6IGJvb2xlYW4gKTogUHJvbWlzZTx1bmRlZmluZWQ+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2U8dW5kZWZpbmVkPiggKCByZXNvbHZlOiAoKSA9PiB2b2lkLCByZWplY3Q6ICgpID0+IHZvaWQgKSA9PiB7XG5cblx0XHRcdC8vIEFyZSB0aGVyZSBhbnkgbm90aWZpY2F0aW9ucyB0byBzaGlmdD9cblx0XHRcdGlmICggbm90aWZpY2F0aW9ucy5sZW5ndGggPT09IDAgKSB7XG5cdFx0XHRcdHJlc29sdmUoKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRsZXQgbm90aWZpY2F0aW9uUHJvbWlzZXM6IEFycmF5PFByb21pc2U8dW5kZWZpbmVkPj4gPSBbXTtcblx0XHRcdGZvciAoIGxldCBpOiBudW1iZXIgPSBub3RpZmljYXRpb25zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tICkge1xuXHRcdFx0XHRub3RpZmljYXRpb25Qcm9taXNlcy5wdXNoKCBub3RpZmljYXRpb25zWyBpIF0uY29tcG9uZW50LnNoaWZ0KCBkaXN0YW5jZSwgdG9NYWtlUGxhY2UgKSApO1xuXHRcdFx0fVxuXHRcdFx0UHJvbWlzZS5hbGwoIG5vdGlmaWNhdGlvblByb21pc2VzICkudGhlbiggcmVzb2x2ZSApOyAvLyBEb25lXG5cblx0XHR9ICk7XG5cdH1cblxuXHQvKipcblx0ICogQWRkIGEgbmV3IG5vdGlmaWNhdGlvbiB0byB0aGUgbGlzdCBvZiBub3RpZmljYXRpb25zICh0cmlnZ2VycyBjaGFuZ2UgZGV0ZWN0aW9uKVxuXHQgKlxuXHQgKiBAcGFyYW0gbm90aWZpY2F0aW9uIE5vdGlmaWNhdGlvbiB0byBhZGQgdG8gdGhlIGxpc3Qgb2Ygbm90aWZpY2F0aW9uc1xuXHQgKi9cblx0cHJpdmF0ZSBhZGROb3RpZmljYXRpb25Ub0xpc3QoIG5vdGlmaWNhdGlvbjogTm90aWZpZXJOb3RpZmljYXRpb24gKTogdm9pZCB7XG5cdFx0dGhpcy5ub3RpZmljYXRpb25zLnB1c2goIG5vdGlmaWNhdGlvbiApO1xuXHRcdHRoaXMuY2hhbmdlRGV0ZWN0b3IubWFya0ZvckNoZWNrKCk7IC8vIFJ1biBjaGFuZ2UgZGV0ZWN0aW9uIGJlY2F1c2UgdGhlIG5vdGlmaWNhdGlvbiBsaXN0IGNoYW5nZWRcblx0fVxuXG5cdC8qKlxuXHQgKiBSZW1vdmUgYW4gZXhpc3Rpbmcgbm90aWZpY2F0aW9uIGZyb20gdGhlIGxpc3Qgb2Ygbm90aWZpY2F0aW9ucyAodHJpZ2dlcnMgY2hhbmdlIGRldGVjdGlvbilcblx0ICpcblx0ICogQHBhcmFtIG5vdGlmaWNhdGlvbiBOb3RpZmljYXRpb24gdG8gYmUgcmVtb3ZlZCBmcm9tIHRoZSBsaXN0IG9mIG5vdGlmaWNhdGlvbnNcblx0ICovXG5cdHByaXZhdGUgcmVtb3ZlTm90aWZpY2F0aW9uRnJvbUxpc3QoIG5vdGlmaWNhdGlvbjogTm90aWZpZXJOb3RpZmljYXRpb24gKTogdm9pZCB7XG5cdFx0dGhpcy5ub3RpZmljYXRpb25zID1cblx0XHRcdHRoaXMubm90aWZpY2F0aW9ucy5maWx0ZXIoICggaXRlbTogTm90aWZpZXJOb3RpZmljYXRpb24gKSA9PiBpdGVtLmNvbXBvbmVudCAhPT0gbm90aWZpY2F0aW9uLmNvbXBvbmVudCApO1xuXHRcdHRoaXMuY2hhbmdlRGV0ZWN0b3IubWFya0ZvckNoZWNrKCk7IC8vIFJ1biBjaGFuZ2UgZGV0ZWN0aW9uIGJlY2F1c2UgdGhlIG5vdGlmaWNhdGlvbiBsaXN0IGNoYW5nZWRcblx0fVxuXG5cdC8qKlxuXHQgKiBSZW1vdmUgYWxsIG5vdGlmaWNhdGlvbnMgZnJvbSB0aGUgbGlzdCAodHJpZ2dlcnMgY2hhbmdlIGRldGVjdGlvbilcblx0ICovXG5cdHByaXZhdGUgcmVtb3ZlQWxsTm90aWZpY2F0aW9uc0Zyb21MaXN0KCk6IHZvaWQge1xuXHRcdHRoaXMubm90aWZpY2F0aW9ucyA9IFtdO1xuXHRcdHRoaXMuY2hhbmdlRGV0ZWN0b3IubWFya0ZvckNoZWNrKCk7IC8vIFJ1biBjaGFuZ2UgZGV0ZWN0aW9uIGJlY2F1c2UgdGhlIG5vdGlmaWNhdGlvbiBsaXN0IGNoYW5nZWRcblx0fVxuXG5cdC8qKlxuXHQgKiBIZWxwZXI6IEZpbmQgYSBub3RpZmljYXRpb24gaW4gdGhlIG5vdGlmaWNhdGlvbiBsaXN0IGJ5IGEgZ2l2ZW4gbm90aWZpY2F0aW9uIElEXG5cdCAqXG5cdCAqIEBwYXJhbSAgIG5vdGlmaWNhdGlvbklkIE5vdGlmaWNhdGlvbiBJRCwgdXNlZCBmb3IgZmluZGluZyBub3RpZmljYXRpb25cblx0ICogQHJldHVybnMgTm90aWZpY2F0aW9uLCB1bmRlZmluZWQgaWYgbm90IGZvdW5kXG5cdCAqL1xuXHRwcml2YXRlIGZpbmROb3RpZmljYXRpb25CeUlkKCBub3RpZmljYXRpb25JZDogc3RyaW5nICk6IE5vdGlmaWVyTm90aWZpY2F0aW9uIHwgdW5kZWZpbmVkIHtcblx0XHRyZXR1cm4gdGhpcy5ub3RpZmljYXRpb25zLmZpbmQoICggY3VycmVudE5vdGlmaWNhdGlvbjogTm90aWZpZXJOb3RpZmljYXRpb24gKSA9PiBjdXJyZW50Tm90aWZpY2F0aW9uLmlkID09PSBub3RpZmljYXRpb25JZCApO1xuXHR9XG5cblx0LyoqXG5cdCAqIEhlbHBlcjogRmluZCBhIG5vdGlmaWNhdGlvbidzIGluZGV4IGJ5IGEgZ2l2ZW4gbm90aWZpY2F0aW9uIElEXG5cdCAqXG5cdCAqIEBwYXJhbSAgIG5vdGlmaWNhdGlvbklkIE5vdGlmaWNhdGlvbiBJRCwgdXNlZCBmb3IgZmluZGluZyBhIG5vdGlmaWNhdGlvbidzIGluZGV4XG5cdCAqIEByZXR1cm5zIE5vdGlmaWNhdGlvbiBpbmRleCwgdW5kZWZpbmVkIGlmIG5vdCBmb3VuZFxuXHQgKi9cblx0cHJpdmF0ZSBmaW5kTm90aWZpY2F0aW9uSW5kZXhCeUlkKCBub3RpZmljYXRpb25JZDogc3RyaW5nICk6IG51bWJlciB8IHVuZGVmaW5lZCB7XG5cdFx0Y29uc3Qgbm90aWZpY2F0aW9uSW5kZXg6IG51bWJlciA9XG5cdFx0XHR0aGlzLm5vdGlmaWNhdGlvbnMuZmluZEluZGV4KCAoIGN1cnJlbnROb3RpZmljYXRpb246IE5vdGlmaWVyTm90aWZpY2F0aW9uICkgPT4gY3VycmVudE5vdGlmaWNhdGlvbi5pZCA9PT0gbm90aWZpY2F0aW9uSWQgKTtcblx0XHRyZXR1cm4gKCBub3RpZmljYXRpb25JbmRleCAhPT0gLTEgPyBub3RpZmljYXRpb25JbmRleCA6IHVuZGVmaW5lZCApO1xuXHR9XG5cbn1cbiJdfQ==